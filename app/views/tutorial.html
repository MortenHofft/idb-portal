{% extends "base.html" %} 

{% block headblock %}
<link rel="stylesheet" type="text/css" href="/portal/css/tutorial.css">
<meta property="og:site_name" content="iDigBio Specimen Portal" />
<meta property="og:title" content="iDigBio Portal Tutorial" />
<meta property="og:image" content="https://www.idigbio.org/sites/default/files/sites/default/files/idigbio_og.png" />
<meta property="og:url" content="{{user.protocol}}://{{ user.host }}/portal/tutorial" />
<meta property="og:description" content="The iDigBio Specimen Portal user tutorial provides an overview of how to search features within the portal." />
{% endblock %} 
{% block content %}

<div id="static-menu" style="display:hidden;position:fixed;top:0px;left:0px;margin:0px;padding:0px;"></div>
<div class="container-fluid">
  <div class="row">
    
      <div id="content" class="col-lg-7 col-lg-offset-2 col-md-9 col-md-offset-1 col-sm-10" style="text-align:justify;margin-top:16px;">
          <h2 style="text-align:center;line-height:1.3em;margin-top:20px;">iDigBio Specimen Portal Tutorial<br><span style="font-size:0.7em;">(version 6.0, released June 2015)</span></h2>
         <div style="margin:10px;">
        		<div id="introduction" style="background-color: #E5E5E5;border-bottom: 1px solid #FFFFFF;height: 1px;margin: 9px 1px;width:100%;" class="scrollspy"></div>
            	<h3 >Introduction</h3>
            	<p><u>The iDigBio specimen portal</u> (<em>https://www.idigbio.org/portal</em>) provides access to millions of records about neontological and paleontological specimens curated at museums and other institutions in the US. Records might include information about the specimen, when, where and by whom it was collected, the institution providing the data, and media related to the specimen (currently only images of the specimen or the specimen label are available). The main intent of this tutorial is to familiarize the user with the search capabilities of this portal.</p>
              <h3 id="requirements" style="margin-top:30px;">Requirements</h3>
              <p>
                The iDigBio Portal requires the use of an HTML5 compliant browser with cookies enabled. The Portal has been tested successfully against, and is supported for, the following browsers:<br>
                <b>Chrome</b><br>
                <b>Firefox</b><br>
                <b>Safari</b><br>
                <b>Internet Explorer</b> 10,11<br>
              </p>
            	<h3 id="navigating" class="scrollspy" style="margin-top:30px;">Portal Navigation</h3>
            	<p>The main features of the portal can be accessed through the <b>Green Menu Bar</b> <em>(Fig. 1)</em> near the top of the page.  The menu choices include links to the <em><b>iDigBio Home</b></em>, the <em><b>Portal Home</b></em> page, the <em><b>Search Records</b></em> page, <em><b>Tutorial</b></em> (this page), and <em><b>Feedback</b></em>, which are detailed next.</p>
              <div class="clearfix">
                <figure id="fig1" >
                	<figcaption>Fig. 1</figcaption>
                	<img style="width:90%;" src="/portal/img/tutorial/greenbar.png">
            	  </figure>
              </div>
        		<p style="margin-top:10px;">The <em><b>iDigBio Home</b></em> link takes you away from the portal, and into the portion of iDigBio website containing information about the project, its workshops and working groups, research, education and outreach.</p>

        		<p>Use the <em><b>Portal Home</b></em> page to start searching Specimen Records quickly on a scientific name, and to view basic overall statistics about the existing data (i.e., distribution of data by collection type, and overall number of records).  Search results are returned on a new page that allows a more comprehensive search.</p>

        		<p>Use the <em><b>Search Records</b></em> page for more comprehensive and specific searches. On this page, you can perform a <b>Full Text Search</b> and/or an <b>Advanced Search</b> and view the search results as detailed in the next section.</p>

        		<p>The <em><b>Tutorial</b></em> page is this page.</p>

             <p>Use the <em><b>Our Data</b></em> menu to access the <em><b>Publishers</b></em> and <em><b>Collections</b></em> submenu pages. The <em><b>Publications</b></em> page provides general count and usage statistics about the datasets and publishers provided to iDigBio. The <em><b>Collections</b></em> page provides a comprehensive list of collections and institutions that house data in the United States.</p>

            <p>Use the <em><b>Research Tools</b></em> page to view research software that make use of services and data.</p>

        		<p>Use the <em><b>Feedback</b></em> page to provide input about what could be improved in the portal, technical problems you might be facing, questions on how to use the portal, or just to let us know that you are finding the portal useful!</p>

            <h3 id="aboutsearch">About the iDigBio Portal Search</h3>
            <p>The iDigBio Search page is intended to be an example of what can be achieved with the iDigBio Search API by a software developer. The Portal Search runs entirely off of the public iDigBio search API. To learn more about the iDigBio Search API go <a href="https://www.idigbio.org/wiki/index.php/IDigBio_API">here</a>.
            </p>

            <h3 id="searchpage" style="margin-top:30px;">Searching iDigBio</h3>
            <p>

              The iDigBio <em><b>Search Records</b></em> page is split into three main sections: the search form, the mapped search results and the record search results, as displayed in <em>(Fig. 2)</em>. 
            </p>
              <figure id="fig2"  class="clearfix">
                  <figcaption>Fig. 2</figcaption>
                  <img style="width:60%;" src="/portal/img/tutorial/search-page.png">
              </figure>
        		<h4 id="searching" class="scrollspy" style="margin-top:30px;">Understanding and Performing Searches</h4>

        		<p>The search form section of the <em><b>Search Records</b></em> page <em>(Fig. 3)</em> provides all fields necessary for doing full text and advanced exact match searching across iDigBio data. The <b>search all field</b> box allows you to search a term across all fields of the data simultaneously. If you search for ‘carex’, this term is searched in all fields, and the search returns records where ‘carex’ appears in a scientific name, genus, host, locality, or any other place where it appears, excluding substrings (parts of words). Searches are not case-sensitive, i.e., ‘carex’ and ‘Carex’ will return the same result. Checking the box <b>Must have image</b> restricts mapped and record results to those specimens that have related images. Checking the <b>Must have map point</b> restricts the record results section to show only records that contain geopoint data (mapping results can contain only records with geopoint data).</p>
            <div class="clearfix">      		
              <figure id="fig3">
                  <figcaption>Fig. 3</figcaption>
          			  <img src="/portal/img/tutorial/search-form.png">
          		</figure>
            </div>
        		
            <h4>Filters tab</h4>
            <p>The <em>Filters</em> tab <em>(Fig. 3)</em> allows you provide exact text match and range searches for data fields. Multiple exact matches are possible with text matching filters by using a new line for each entry. In the case of date and range (elevation, depth, etc.) filters, only a single entry is possible per field box. Text filters also offer an autocomplete list (once you start typing) that filters based on already provided data in the system. The autocomplete feature for the Scientific Name and Specific Epithet filters also offer an "add all" feature next to each suggestion. This allows you to add all names that start with the suggested match as a whole word (i.e. add all <i>californica</i> would add <i>calfifornica borealis</i> not <i>californicalis</i>).</p>

            <p>The Family, Genus and Scientifc Name filters provide an "Add Synonyms" button which uses the <a href="http://eol.org/api" target="EOL API" alt="EOL API">Encyclopedia of Life API</a> to find synonyms for names entered in the text box. Clicking the button once you have entered a name or multiple names will add any found synonyms to the text box.</p> 

        		<p>Alternatively, each filter offers the possibility to match a record by the presence or absence of the data field in a record using the <em>Present</em> and <em>Missing</em> checkboxes respectively.</p> 
            
            <p style="margin-top:10px;">To reset the search form to its default state, use the <b>Reset</b> button or use the <b>Clear</b> button to simply clear the text boxes and check boxes on screen.</p>

            <h4>Mapping tab</h4>
            <p>The <em>Mapping</em> tab <em>(Fig. 4)</em> provides the ability to specify geographic boundaries for records through either a circlular or recatangular boundaries. Using this feature limits all results to records with geopoint data. You can specify your bounding by either supplying the NorthWest and SouthEast lat/lon coordinates of a rectangle or provide a lat/lon point with a radius to create a circular boundry. Alternatively you can also draw the rectangle or circle boundary by using the draw feature provided on the map. This feature is covered in the <a href='#map'>map</a> section of this tutorial. 
            </p>
            <div class="clearfix">
              <figure id="fig4" >
                  <figcaption>Fig. 4</figcaption>
                  <img src="/portal/img/tutorial/mapping-panel.png"> 
              </figure>
            </div>

            <h4 id="filters" style="margin-top:30px;">Sorting tab</h4>
            <p>The <em>Sorting</em> tab <em>(Fig. 5)</em> provides the ability on up to six data fields. The default settings for this tab sort results based Genus then Specific Epithet and then Date Collected. Sort rules can be added with the "Add a sort" <img src="/portal/img/tutorial/add-button.jpg"/> button and removed with the <img src="/portal/img/tutorial/remove-button.jpg"/> button.</p>
            <p>
            <div class="clearfix">
              <figure id="fig5" >
                  <figcaption>Fig. 5</figcaption>
                  <img src="/portal/img/tutorial/sort-panel.png" style="max-width:650px;">
              </figure>
            </div>
            </p>

            <h4>Download tab</h4>

            <p>The <em>Download</em> tab <em>(Fig. 6)</em> allows you to obtain all the record data in the current search result in Darwin Core Archive (DwC-A) format. You must provide a valid email address in the Email input box in order to run the download. Your email address is required so that a link to the DwC-A file can be sent to you in the event that you navigate away from the <b>Search Records</b> page. The approximate Build Time provides a rough calculation of the time it will take to generate the DwC-A. Once you click the download button, your download will appear in the <em>Available Downloads</em> box with a status of "pending". When your download is ready, a link to the download will replace the "pending" status.</p>
            <div class="clearfix">
              <figure id="fig6">
                  <figcaption>Fig. 6</figcaption>
                  <img src="/portal/img/tutorial/download-panel.png"> 
              </figure>
            </div>
            <p>A Darwin Core Archive is a zip file that includes one or more text CSV (comma separated value) files, each with a .txt extension and a descriptor (meta.xml) that contains metadata about the data set that you downloaded (e.g., who provided the data and the format).  A data download that has images or other media associated with it will have two CSV files, one for specimen data and the other describing the media.  The CSV file can be opened by any text editor or can be imported into a database or spreadsheet.  A modestly sized download (100,000 records) can be readily opened in software like MS Excel.  The easiest way to open a CSV file with Excel is to change the .txt extension to .csv before you open the file.  
            </p>

        		<h3 id="viewing" class="scrollspy" style="margin-top:30px;">Viewing Results</h3>

        		<p>Results data are displayed below the search form and mapped results sections. This section displays the total number of results matching your search criteria and gives you three options for displaying the results: <b>List</b> view, <b>Label</b> view, <b>Images</b> gallery and the <b>Recordsets</b> view. The <b>List</b> view allows you to display any number of columns of DwC data that are searchable in iDigBio. The right side of the <b>List</b> view headers provides a configuration button that allows you to select which columns are viewable in the list. The <b>Label</b> view displays a stylized specimen label, with a pre-determined set of information (taxonomy, geography, and collection data) and a thumbnail of a related image when available. The <b>Images</b> gallery displays all images associated with the specimen records search results. Each image contains a pre-determined set of information (taxonomy, collection data) displayed as a label over the image. Clicking on the image will open its associated media record. The <b>Recordsets</b> view provides a list of recordsets and record counts that are present in the search results. </p> 

        		<p>Clicking on a single row of the table or a single label displays a complete specimen record page <em>(Fig. 7)</em>, including a summary section at the top, any associated media, a map with the location if applicable and the attribution information.  The very bottom portion of the page includes all data available in the idigbio API. It includes a complete list of the Darwin Core data, a list of data correction/issue flags and their descriptions and a complete view of the raw data as it exists in the API. With the raw data you can have a peek at the data that is available to you to add value to other portals. It can also be used to view additional information created by iDigBio, such as the internal GUID or when the record was ingested or updated in our system, and to detect whether iDigBio is not accurately displaying the data as it came from the provider.</p>
            <p>Clicking on the image in the 
            specimen page allows you to access the full-size image as well as metadata about the image. You can go back to the specimen information, using the <b>view specimen record</b> link next to the specimen name.</p>
            <div class="clearfix">
              <figure id="fig7" >
                  <figcaption>Fig. 7</figcaption>
                  <img style="width:95%" src="/portal/img/tutorial/fullrecord.png">
              </figure>
            </div>
         

            <h4 id="map" class="scrollspy" style="margin-top:30px;">Mapped Results</h4>
            <p>Any records that have been georeferenced (i.e., latitude and longitude coordinates are present) are included in the map view. The map displays results in two styles depending on the number of mapped results. When the results contain more than 100,000 points they will be displayed as a geohashed heat map <em>(Fig. 8)</em>. When the results are a 100,000 or less, the results are displayed as individual color coded points <em>(Fig. 9)</em>. Color coded points are displayed as such to disguish between different taxa. The map legend in the lower left corner displays the color to taxa labeling of the top 10 taxa in the results (all other taxa are displayed with a brown colored point by default). Both the heat map and point displays allow you to click on them to display the results in a pop-up box in the location you clicked. In the case of the heat map, the results will be all records within the boundary of the geohash (heat) box where you click. In the case of clicking a point the results displayed will be all those that fall within a radius of the point where you clicked (the radius length varies depending on the zoom level of the map).  The results pop-up box also provides a <i>Set Map Bounds</i> button. This feature allows you to set the <em>Mapping</em> tab parameters to the same parameters as the box or point that you clicked on.</p>

            <p>The map provides several controls for further interaction. The top left corner provides two sets of controls. The camera button <img src="/portal/img/tutorial/camera-button.png" /> allows you to create a PNG image of the map as displayed the moment you click the button. This feature can take several seconds to generate the image. The buttons below the camera button provide boundary drawing capabilities. Click the rectangle <img src="/portal/img/tutorial/rectangle-button.png" /> or circle button <img src="/portal/img/tutorial/circle-button.png" /> to draw a rectangular or circular boundary around a geographic area to further limit your results to records with geopoints inside the boundry. The button in the top right corner is a toggle between regular and a full screen mode. Below the full screen button are the zoom-in and zoom-out buttons. The map zoom can also be changed with a mouse scroll wheel when the mouse pointer is over the map. You can also draw a boundary to zoom in to by holding the <b>shift</b> button on your keyboard and using your mouse to draw the box boundary.</p>

            <div class="clearfix">
              <figure id="fig8"  style="float:left;margin:20px;" >
                  <figcaption>Fig. 8</figcaption>          
                  <img src="/portal/img/tutorial/heatmap.jpg"> 
              </figure>
              <figure id="fig9"  style="float:right;margin:20px;">
                  <figcaption>Fig. 9</figcaption>          
                  <img src="/portal/img/tutorial/pointmap.jpg"> 
              </figure>
            </div>

            <h3 id="linking" class="scrollspy" style="margin-top:30px;">Linking to a Specific Search</h3>
            <p>The iDigBio Portal search page allows for predefining a specific search with a URI link using URL parameters that are similar to iDigBio API parameters. Below is a table of parameters and values accepted and an example URI.</p>
            <table class="table table-bordered table-striped table-condensed">
              <thead>
                <tr><th>Parameter</th><th>Description</th><th>Values Accepted</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>rq</td>
                  <td>A JSON style object provided in the <a href="https://github.com/idigbio/idigbio-search-api/wiki/Query-Format">iDigBio Search API Query</a> format.
                  </td>
                  <td>See <a href="https://github.com/idigbio/idigbio-search-api/wiki/Query-Format">iDigBio Search API Query</a></td>
                </tr>
                <tr>
                  <td>sort</td>
                  <td>A JSON formatted object or array of objects using a key value pair to represent a value to sort on and a direction to sort either "asc" or "desc".
                  </td>
                  <td>ex:
                    {"genus":"asc"}
                      ex:
                      [{"genus":"asc"},{"species":"desc"}]
                  </td>
                </tr>
                <tr>
                  <td>view</td>
                  <td>Which format to show the results in</td>
                  <td>
                    value can be either "list", "labels", "images", "recordsets"
                  </td>
                </tr>
              </tbody>
            </table>
            <p>
              The following URI example links to a search for specimens with Genus "Carex" that has images with the results sorting on Specific Epithet and results view set to the Labels view.

              <a href='/portal/search?rq={"genus":"carex"}&sort=specificepithet&view=labels'> 
                https://www.idigbio.org/portal/search?rq={"genus":"carex"}&sort=specificepithet&view=labels
              </a>
            </p>
        </div>
      </div>
      <div class="col-lg-2 col-md-2 col-sm-2">
            <div id="side-nav">
                <ul id="side-nav-list" >
                    <li class="title">Contents</li>
                    <li><a href="#introduction">Introduction</a></li>
                    <li><a href="#navigating">Navigation</a></li>
                    <li><a href="#searching">Performing Searches</a></li>
                    <li><a href="#viewing">Viewing Search Results</a></li>
                    <li><a href="#map">Mapped Search Results</a></li>
                    <li><a href="#linking">Linking to a Search</a></li>
                </ul>
            </div>
      </div>
  </div>
</div>


{% endblock %} 

